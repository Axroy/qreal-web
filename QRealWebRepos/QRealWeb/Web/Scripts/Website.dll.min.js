(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M;$.Define($$,{"":{Primitives:{Button:$.Class({draw:function(N,O,P){var S=this;return(function(Q){return function(R){return S.DrawRect(N,O,Q,R);};}(P))("#FF0000");}},{New:function(T,U,V,W,X,Y,Z,_0){var _1;_1=d.New(U,V,W,X);_1.width=U;_1.height=V;_1.marginTop=W;_1.padding=X;_1["id@193"]=T;_1["text@194"]=Y;_1["textSize@195"]=Z;_1["onClick@196"]=_0;return $.New(this,_1);}}),ImageView:$.Class({},{New:function(_2,_3,_4,_5,_6,_7){var _8;_8=d.New(_2,_3,_4,_5);_8.width=_2;_8.height=_3;_8.marginTop=_4;_8.padding=_5;_8["src@144"]=_6;_8["gravity@145"]=_7;return $.New(this,_8);}}),LinearLayout:$.Class({},{New:function(_9,_,ba,bb,bc){var bd;bd=d.New(_,ba,0,0);bd.width=_;bd.height=ba;bd["orient@117"]=_9;bd["background@118"]=bb;bd["children@119"]=bc;return $.New(this,bd);}}),TextView:$.Class({},{New:function(bd,be,bf,bg,bh,bi){var bj;bj=d.New(bd,be,bf,bg);bj.width=bd;bj.height=be;bj.marginTop=bf;bj.padding=bg;bj["text@168"]=bh;bj["textSize@169"]=bi;return $.New(this,bj);}}),Transition:$.Class({},{New:function(bk,bl,bm){var bn;bn={};bn["from@226"]=bk;bn["to'@227"]=bl;bn["button@228"]=bm;return $.New(this,bn);}}),VisiblePrimitive:$.Class({DrawRect:function(bo,bp,bq,br){this.rect=b.drawRect(bo,bp+this["padding@72"],bq+this["marginTop@71"],b.sizeToFloat(this["width@69"]),b.sizeToFloat(this["height@70"]),br);},IsInside:function(bs,bt){if((this["padding@72"]<=bs?bs<=this["padding@72"]+b.sizeToFloat(this["width@69"]):false)?this["marginTop@71"]<=bt:false){return bt<=this["marginTop@71"]+b.sizeToFloat(this["height@70"]);}else{return false;}},Move:function(bu,bv){var bw,bx;bw=this.rect.translate(bu,bv);bx=function(by){by;};bx(bw);this["padding@72"]=this["padding@72"]+bu;this["marginTop@71"]=this["marginTop@71"]+bv;}},{New:function(bz,bA,bB,bC){var bD;bD={};bD["width@69"]=bz;bD["height@70"]=bA;bD["marginTop@71"]=bB;bD["padding@72"]=bC;bD.rect=undefined;return $.New(this,bD);}}),WebView:$.Class({},{New:function(bE,bF,bG,bH,bI){var bJ;bJ=d.New(bF,bG,bH,bI);bJ["id@249"]=bE;return $.New(this,bJ);}}),drawRect:function(bK,bL,bM,bN,bO,bP){return bK.rect(bL,bM,bN,bO).attr("fill",bP);},line:function(bQ,bR,bS,bT,bU){var bV,bW,bX;bV=new i.pathBuilder();bW=bQ.path(bV.m(bR,bS).l(bT-bR,bU-bS).z().mk());bX=function(bY){bY;};return bX(bW);},sizeToFloat:function(bZ){var b0;if(bZ.$==2){b0=bZ.$0;return b0;}else{return 100;}}}},Website:{AddDiagramControl:$.Class({get_Body:function(){return k.AddDiagram();}}),Canvas:{RaphaelViewer:$.Class({get_Body:function(){return m.Main();}}),SampleInternals:{Main:function(){var b1,b2,b3;b1=p.Div($.New(r,{$:0}));b2=(b3=function(b4){var b5,b6,b7,b8,b9,b_,ca,cj,ck,cp,cq,cr,cs,ct,cu,cv,cw,cx,cy,cz,cA,cB,cN,cP,cV,cX,c1;b5=new i(b4.Body,150+300,500);b6=[150,0];b7=b6[1];b8=b6[0];b9=b5.rect(0,0,150+300,500);b_=function(b$){b$;};b_(b9);ca=function(cb,cc,cd,ce){var cf,cg,ch;cf=new i.pathBuilder();cg=b5.path(cf.m(cb,cc).l(cd-cb,ce-cc).z().mk());ch=function(ci){ci;};return ch(cg);};ca(150,0,150,500);cj=(ck={contents:0},function(){var cm;s.Increment(ck);cm=c.New("button",{$:2,$0:100},{$:2,$0:50},50,25-150,"someText",20,"method");((function(cn){return function(co){return cm.draw(b5,cn,co);};}(150))(0));return cm;});cp={contents:q.ofArray([cj(null)])};cq={contents:$.New(r,{$:0})};cr={contents:0};cs=[{contents:0},{contents:0}];ct=cs[1];cu=cs[0];cv=[b5.top.attr("x"),b5.top.attr("y")];cw=cv[1];cx=cv[0];cy={contents:{$:0}};cz={contents:false};cA={contents:200};cB=t(u).mousedown(function(cC){var cD,cE,cJ,cK,cL,cM;cD=(cE=function(cF){var cG,cH;cG=v(cC.pageX)-150-216;cH=v(cC.pageY)-152;return cF.IsInside(cG,cH);},function(cI){return w.tryFind(cE,cI);});cJ=cD(cp.contents);if(cJ.$==0){cK=cD(cq.contents);if(cK.$==0){}else{cL=cK.$0;cy.contents={$:1,$0:cL};cz.contents=false;}}else{cM=cJ.$0;cy.contents={$:1,$0:cM};cu.contents=cC.pageX;ct.contents=cC.pageY;cz.contents=true;}cA.contents=cA.contents+20;return b5.safari();});cN=function(cO){cO;};cN(cB);cP=t(u).mousemove(function(cQ){var cR,cS,cT,cU;cR=cy.contents;if(cR.$==1){cS=cR.$0;cT=v(cQ.pageX-cu.contents);cU=v(cQ.pageY-ct.contents);cS.Move(cT,cU);cu.contents=cQ.pageX;ct.contents=cQ.pageY;return b5.safari();}else{return null;}});cV=function(cW){cW;};cV(cP);cX=t(u).mouseup(function(){var cZ,c0;cZ=cy.contents;if(cZ.$==1){c0=cZ.$0;cy.contents={$:0};}else{return null;}});c1=function(c2){c2;};return c1(cX);},function(c3){return x.OnAfterRender(b3,c3);});b2(b1);return b1;},SimpleExample:function(){var c4,c5,c6;c4=p.Div($.New(r,{$:0}));c5=(c6=function(c7){var c8,c9,c_,c$,db,dc,de,df,dh,di,dk,dl;c8=new i(c7.Body,400,250);c9=c8.circle(90,90,70);c_=c8.text(50,50,"Hello\nRaphael");c$=function(da){da;};c$(c_);db=c8.path("M10 10L90 90");dc=function(dd){dd;};dc(db);de=c8.ellipse(250,50,40,20);df=function(dg){dg;};df(de);dh=c8.rect(250,140,50,50,10);di=function(dj){dj;};di(dh);dk=c9.attr("fill","#d0d");dl=function(dm){dm;};return dl(dk);},function(dn){return x.OnAfterRender(c6,dn);});c5(c4);return c4;}}},Forms:{AddDiagram:function(){var _do,dp,dq,dr,dt,du,dv,dw,dx,dy,dA,dD,dE,dJ;_do=(dp=(dq=k.DiagramTitleForm(),(dr=function(ds){return z.WithSubmitButton(ds);},dr(dq))),(dt=(du=(dv=A.get_Default(),(dw=(dx=(dy=function(dz){return{$:0,$0:dz};},dy("Please enter diagram title.")),(dA=function(dB){return{$:1,$0:dB};},dA(dx))),$.New(A,{Header:dv.Header,Padding:dv.Padding,Description:dw,BackgroundColor:dv.BackgroundColor,BorderColor:dv.BorderColor,CssClass:dv.CssClass,Style:dv.Style}))),function(dC){return z.WithCustomFormContainer(du,dC);}),dt(dp)));dD=(dE=B.Do(),dE.Delay(function(){return dE.Bind(_do,function(dG){var dH,dI;return dE.ReturnFrom((dH=C.Call("Website:5",[C.Call("Website:0",[]),dG]),dH,(dI=D,(dI.location="/","/"),B.Return(null))));});}));dJ=function(dK){return B.Flowlet(dK);};return dJ(dD);},DiagramTitleForm:function(){var dL;return E.$((dL=function(dM){return dM;},B.Return(dL)),k.Input("Title","Please enter a title"));},Input:function(dN,dO){var dP,dQ,dR,dS,dU,dW;dP=(dQ=(dR=F.Input(""),(dS=function(dT){return E.Validator().IsNotEmpty(dO,dT);},dS(dR))),(dU=function(dV){return z.WithValidationIcon(dV);},dU(dQ)));dW=function(dX){return z.WithTextLabel(dN,dX);};return dW(dP);},InputInt:function(dY,dZ){var d0,d1,d2,d3,d4,d5,d7,d9,d_;d0=(d1=(d2=(d3=F.Input(""),(d4=E.Validator().IsInt(dZ),d4(d3))),(d5=function(d6){return z.WithValidationIcon(d6);},d5(d2))),(d7=function(d8){return z.WithTextLabel(dY,d8);},d7(d1)));d9=(d_=function(d$){return d$<<0;},function(ea){return B.Map(d_,ea);});return d9(d0);},LoginForm:function(eb){var ec,ed,ee,ef,eg,ei,ek,em,en,eo,ep,eq,es,eu,ew,ex,eA,eB,eO;ec=(ed=(ee=(ef=F.Input(""),(eg=function(eh){return E.Validator().IsNotEmpty("Enter Username",eh);},eg(ef))),(ei=function(ej){return z.WithValidationIcon(ej);},ei(ee))),(ek=function(el){return z.WithTextLabel("Username",el);},ek(ed)));em=(en=(eo=(ep=F.Password(""),(eq=function(er){return E.Validator().IsNotEmpty("Enter Password",er);},eq(ep))),(es=function(et){return z.WithValidationIcon(et);},es(eo))),(eu=function(ev){return z.WithTextLabel("Password",ev);},eu(en)));ew=E.$(E.$((ex=function(ey){return function(ez){return{Name:ey,Password:ez};};},B.Return(ex)),ec),em);eA=(eB=B.Do(),eB.Delay(function(){var eD,eE,eF,eG,eH;return eB.Bind((eD=(eE=(eF=G.get_Default(),$.New(G,{Label:{$:1,$0:"Login"},Style:eF.Style,Class:eF.Class})),(eG=(eH=G.get_Default(),$.New(G,{Label:{$:1,$0:"Reset"},Style:eH.Style,Class:eH.Class})),function(eI){return z.WithCustomSubmitAndResetButtons(eE,eG,eI);})),eD(ew)),function(eJ){var eK,eL;return eB.ReturnFrom((eK=C.Async("Website:1",[eJ]),(eL=function(eM){var eN;if(eM){eN=D;eN.location=eb;eb;return B.Return(null);}else{return k.WarningPanel("Login failed");}},k.WithLoadingPane(eK,eL))));});}));eO=function(eP){return z.WithFormContainer(eP);};return eO(eA);},RegisterForm:function(){var eQ,eR,eS,eT,eU,eW,eY,e0,e1,e2,e3,e4,e6,e8,e_,e$,fd,fe,fu;eQ=(eR=(eS=(eT=F.Input(""),(eU=function(eV){return E.Validator().IsNotEmpty("Enter Username",eV);},eU(eT))),(eW=function(eX){return z.WithValidationIcon(eX);},eW(eS))),(eY=function(eZ){return z.WithTextLabel("Username",eZ);},eY(eR)));e0=(e1=(e2=(e3=F.Password(""),(e4=function(e5){return E.Validator().IsNotEmpty("Enter Password",e5);},e4(e3))),(e6=function(e7){return z.WithValidationIcon(e7);},e6(e2))),(e8=function(e9){return z.WithTextLabel("Password",e9);},e8(e1)));e_=E.$(E.$(E.$((e$=function(fa){return function(fb){return function(fc){return[fa,fb,fc];};};},B.Return(e$)),eQ),e0),e0);fd=(fe=B.Do(),fe.Delay(function(){var fg,fh,fi,fj,fk;return fe.Bind((fg=(fh=(fi=G.get_Default(),$.New(G,{Label:{$:1,$0:"Login"},Style:fi.Style,Class:fi.Class})),(fj=(fk=G.get_Default(),$.New(G,{Label:{$:1,$0:"Reset"},Style:fk.Style,Class:fk.Class})),function(fl){return z.WithCustomSubmitAndResetButtons(fh,fj,fl);})),fg(e_)),$.Tupled(function(fm){var fn,fo,fp,fq,fr;return fe.ReturnFrom((fn=(fo=fm[0],(fp=fm[1],(fq=fm[2],C.Async("Website:2",[fo,fp,fq])))),(fr=function(fs){var ft;if(fs.$==2){return k.WarningPanel("User with this name already exists");}else{if(fs.$==1){return k.WarningPanel("Password is not confirmed");}else{ft=D;ft.location="/";return B.Return(null);}}},k.WithLoadingPane(fn,fr))));}));}));fu=function(fv){return z.WithFormContainer(fv);};return fu(fd);},WarningPanel:function(fw){var fx;fx=B.Do();return fx.Delay(function(){var fz;return fx.Bind((fz=function(){return x.add(p.Div(q.ofArray([p.Attr().Class("warningPanel")])),q.ofArray([p.Text(fw)]));},B.OfElement(fz)),function(){return fx.ReturnFrom(B.Never());});});},WithLoadingPane:function(fC,fD){var fE,fF;fE=(fF=function(){var fH,fI,fJ,fK,fP;fH=p.Div(q.ofArray([p.Attr().Class("loadingPane")]));fI=I.New();fJ=(fK=function(){var fM;fM=function(fN){var fO;fO=$.New(L,{$:0,$0:fN});fI.event.Trigger(fO);return M.Return(null);};return M.Bind(fC,fM);},M.Delay(fK));fP=function(fQ){var fR;fR={$:0};return M.Start(fQ);};fP(fJ);return[fH,function(fS){fS;},fI.event];},B.BuildFormlet(fF));return B.Replace(fE,fD);}},LoginControl:$.Class({get_Body:function(){return k.LoginForm(this.redirectUrl);}}),RegisterControl:$.Class({get_Body:function(){return k.RegisterForm();}})}});$.OnInit(function(){a=$.Safe($$[""]);b=$.Safe(a.Primitives);c=$.Safe(b.Button);d=$.Safe(b.VisiblePrimitive);e=$.Safe(b.ImageView);f=$.Safe(b.LinearLayout);g=$.Safe(b.TextView);h=$.Safe(b.WebView);i=$.Safe($$.Raphael);j=$.Safe($$.Website);k=$.Safe(j.Forms);l=$.Safe(j.Canvas);m=$.Safe(l.SampleInternals);n=$.Safe($$.IntelliFactory.WebSharper);o=$.Safe(n.Html);p=$.Safe(o.Default);q=$.Safe(n.List);r=$.Safe(q.T);s=$.Safe(n.Operators);t=$.Safe($$.jQuery);u=$.Safe($$.document);v=$.Safe($$.Number);w=$.Safe(n.Seq);x=$.Safe(o.Operators);y=$.Safe(n.Formlet);z=$.Safe(y.Enhance);A=$.Safe(z.FormContainerConfiguration);B=$.Safe(y.Formlet);C=$.Safe(n.Remoting);D=$.Safe($$.window);E=$.Safe(y.Data);F=$.Safe(y.Controls);G=$.Safe(z.FormButtonConfiguration);H=$.Safe(n.Control);I=$.Safe(H["FSharpEvent`1"]);J=$.Safe($$.IntelliFactory.Formlet);K=$.Safe(J.Base);L=$.Safe(K["Result`1"]);return M=$.Safe(n.Concurrency);});$.OnLoad(function(){$.Inherit(c,d);$.Inherit(e,d);$.Inherit(f,d);$.Inherit(g,d);$.Inherit(h,d);});}());
