(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M;$.Define($$,{"":{Primitives:{Button:$.Class({draw:function(N,O,P){var S=this;return(function(Q){return function(R){return S.DrawRect(N,O,Q,R);};}(P))("#FF0000");}},{New:function(T,U,V,W,X,Y,Z,_0){var _1;_1=d.New(U,V,W,X);_1.width=U;_1.height=V;_1.marginTop=W;_1.padding=X;_1["id@193"]=T;_1["text@194"]=Y;_1["textSize@195"]=Z;_1["onClick@196"]=_0;return $.New(this,_1);}}),ImageView:$.Class({},{New:function(_2,_3,_4,_5,_6,_7){var _8;_8=d.New(_2,_3,_4,_5);_8.width=_2;_8.height=_3;_8.marginTop=_4;_8.padding=_5;_8["src@144"]=_6;_8["gravity@145"]=_7;return $.New(this,_8);}}),LinearLayout:$.Class({},{New:function(_9,_,ba,bb,bc){var bd;bd=d.New(_,ba,0,0);bd.width=_;bd.height=ba;bd["orient@117"]=_9;bd["background@118"]=bb;bd["children@119"]=bc;return $.New(this,bd);}}),TextView:$.Class({},{New:function(bd,be,bf,bg,bh,bi){var bj;bj=d.New(bd,be,bf,bg);bj.width=bd;bj.height=be;bj.marginTop=bf;bj.padding=bg;bj["text@168"]=bh;bj["textSize@169"]=bi;return $.New(this,bj);}}),Transition:$.Class({},{New:function(bk,bl,bm){var bn;bn={};bn["from@226"]=bk;bn["to'@227"]=bl;bn["button@228"]=bm;return $.New(this,bn);}}),VisiblePrimitive:$.Class({DrawRect:function(bo,bp,bq,br){this.rect=b.drawRect(bo,bp+this["padding@72"],bq+this["marginTop@71"],b.sizeToFloat(this["width@69"]),b.sizeToFloat(this["height@70"]),br);},IsInside:function(bs,bt){if((this["padding@72"]<=bs?bs<=this["padding@72"]+b.sizeToFloat(this["width@69"]):false)?this["marginTop@71"]<=bt:false){return bt<=this["marginTop@71"]+b.sizeToFloat(this["height@70"]);}else{return false;}},Move:function(bu,bv){var bw,bx;bw=this.rect.translate(bu,bv);bx=function(by){by;};bx(bw);this["padding@72"]=this["padding@72"]+bu;this["marginTop@71"]=this["marginTop@71"]+bv;}},{New:function(bz,bA,bB,bC){var bD;bD={};bD["width@69"]=bz;bD["height@70"]=bA;bD["marginTop@71"]=bB;bD["padding@72"]=bC;bD.rect=undefined;return $.New(this,bD);}}),WebView:$.Class({},{New:function(bE,bF,bG,bH,bI){var bJ;bJ=d.New(bF,bG,bH,bI);bJ["id@249"]=bE;return $.New(this,bJ);}}),drawRect:function(bK,bL,bM,bN,bO,bP){return bK.rect(bL,bM,bN,bO).attr("fill",bP);},line:function(bQ,bR,bS,bT,bU){var bV,bW,bX;bV=new i.pathBuilder();bW=bQ.path(bV.m(bR,bS).l(bT-bR,bU-bS).z().mk());bX=function(bY){bY;};return bX(bW);},sizeToFloat:function(bZ){var b0;if(bZ.$==2){b0=bZ.$0;return b0;}else{return 100;}}}},Website:{AddMovieControl:$.Class({get_Body:function(){return k.AddMovie();}}),Canvas:{RaphaelViewer:$.Class({get_Body:function(){return m.Main();}}),SampleInternals:{Main:function(){var b1,b2,b3;b1=p.Div($.New(r,{$:0}));b2=(b3=function(b4){var b5,b6,b7,b8,b9,b_,ca,cj,ck,cp,cq,cr,cs,ct,cu,cv,cw,cx,cy,cz,cA,cB,cN,cP,cV,cX,c1;b5=new i(b4.Body,150+300,500);b6=[150,0];b7=b6[1];b8=b6[0];b9=b5.rect(0,0,150+300,500);b_=function(b$){b$;};b_(b9);ca=function(cb,cc,cd,ce){var cf,cg,ch;cf=new i.pathBuilder();cg=b5.path(cf.m(cb,cc).l(cd-cb,ce-cc).z().mk());ch=function(ci){ci;};return ch(cg);};ca(150,0,150,500);cj=(ck={contents:0},function(){var cm;s.Increment(ck);cm=c.New("button",{$:2,$0:100},{$:2,$0:50},50,25-150,"someText",20,"method");((function(cn){return function(co){return cm.draw(b5,cn,co);};}(150))(0));return cm;});cp={contents:q.ofArray([cj(null)])};cq={contents:$.New(r,{$:0})};cr={contents:0};cs=[{contents:0},{contents:0}];ct=cs[1];cu=cs[0];cv=[b5.top.attr("x"),b5.top.attr("y")];cw=cv[1];cx=cv[0];cy={contents:{$:0}};cz={contents:false};cA={contents:200};cB=t(u).mousedown(function(cC){var cD,cE,cJ,cK,cL,cM;cD=(cE=function(cF){var cG,cH;cG=v(cC.pageX)-150-216;cH=v(cC.pageY)-152;return cF.IsInside(cG,cH);},function(cI){return w.tryFind(cE,cI);});cJ=cD(cp.contents);if(cJ.$==0){cK=cD(cq.contents);if(cK.$==0){}else{cL=cK.$0;cy.contents={$:1,$0:cL};cz.contents=false;}}else{cM=cJ.$0;cy.contents={$:1,$0:cM};cu.contents=cC.pageX;ct.contents=cC.pageY;cz.contents=true;}cA.contents=cA.contents+20;return b5.safari();});cN=function(cO){cO;};cN(cB);cP=t(u).mousemove(function(cQ){var cR,cS,cT,cU;cR=cy.contents;if(cR.$==1){cS=cR.$0;cT=v(cQ.pageX-cu.contents);cU=v(cQ.pageY-ct.contents);cS.Move(cT,cU);cu.contents=cQ.pageX;ct.contents=cQ.pageY;return b5.safari();}else{return null;}});cV=function(cW){cW;};cV(cP);cX=t(u).mouseup(function(){var cZ,c0;cZ=cy.contents;if(cZ.$==1){c0=cZ.$0;cy.contents={$:0};}else{return null;}});c1=function(c2){c2;};return c1(cX);},function(c3){return x.OnAfterRender(b3,c3);});b2(b1);return b1;},SimpleExample:function(){var c4,c5,c6;c4=p.Div($.New(r,{$:0}));c5=(c6=function(c7){var c8,c9,c_,c$,db,dc,de,df,dh,di,dk,dl;c8=new i(c7.Body,400,250);c9=c8.circle(90,90,70);c_=c8.text(50,50,"Hello\nRaphael");c$=function(da){da;};c$(c_);db=c8.path("M10 10L90 90");dc=function(dd){dd;};dc(db);de=c8.ellipse(250,50,40,20);df=function(dg){dg;};df(de);dh=c8.rect(250,140,50,50,10);di=function(dj){dj;};di(dh);dk=c9.attr("fill","#d0d");dl=function(dm){dm;};return dl(dk);},function(dn){return x.OnAfterRender(c6,dn);});c5(c4);return c4;}}},Forms:{AddMovie:function(){var _do,dp,dq,dr,dt,du,dv,dw,dx,dy,dA,dC,dD,dF,dI,dQ,dR,dU;_do=(dp=(dq=k.MovieTitleForm(),(dr=function(ds){return z.WithSubmitButton(ds);},dr(dq))),(dt=(du=(dv=A.get_Default(),(dw=(dx=(dy=function(dz){return{$:0,$0:dz};},dy("Please enter movie title.")),(dA=function(dB){return{$:1,$0:dB};},dA(dx))),$.New(A,{Header:(dC=(dD=function(dE){return{$:0,$0:dE};},dD("Type Movie title to add")),(dF=function(dG){return{$:1,$0:dG};},dF(dC))),Padding:dv.Padding,Description:dw,BackgroundColor:dv.BackgroundColor,BorderColor:dv.BorderColor,CssClass:dv.CssClass,Style:dv.Style}))),function(dH){return z.WithCustomFormContainer(du,dH);}),dt(dp)));dI=function(dJ){return function(){var dL,dM,dN,dP;dL=B.Call("Website:2",[dJ]);dL;dM=q.ofArray([p.P(q.ofArray([(dN=function(dO){return p.Text(dO);},dN("Title is succesfully added"))]))]);dP=p.Tags();return dP.NewTag("fieldset",dM);};};dQ=(dR=C.Do(),dR.Delay(function(){return dR.Bind(_do,function(dT){return dR.ReturnFrom(C.OfElement(dI(dT)));});}));dU=function(dV){return C.Flowlet(dV);};return dU(dQ);},Input:function(dW,dX){var dY,dZ,d0,d1,d3,d5;dY=(dZ=(d0=D.Input(""),(d1=function(d2){return E.Validator().IsNotEmpty(dX,d2);},d1(d0))),(d3=function(d4){return z.WithValidationIcon(d4);},d3(dZ)));d5=function(d6){return z.WithTextLabel(dW,d6);};return d5(dY);},InputInt:function(d7,d8){var d9,d_,d$,ea,eb,ec,ee,eg,eh;d9=(d_=(d$=(ea=D.Input(""),(eb=E.Validator().IsInt(d8),eb(ea))),(ec=function(ed){return z.WithValidationIcon(ed);},ec(d$))),(ee=function(ef){return z.WithTextLabel(d7,ef);},ee(d_)));eg=(eh=function(ei){return ei<<0;},function(ej){return C.Map(eh,ej);});return eg(d9);},LoginForm:function(ek){var el,em,en,eo,ep,er,et,ev,ew,ex,ey,ez,eB,eD,eF,eG,eJ,eK,eX;el=(em=(en=(eo=D.Input(""),(ep=function(eq){return E.Validator().IsNotEmpty("Enter Username",eq);},ep(eo))),(er=function(es){return z.WithValidationIcon(es);},er(en))),(et=function(eu){return z.WithTextLabel("Username",eu);},et(em)));ev=(ew=(ex=(ey=D.Password(""),(ez=function(eA){return E.Validator().IsNotEmpty("Enter Password",eA);},ez(ey))),(eB=function(eC){return z.WithValidationIcon(eC);},eB(ex))),(eD=function(eE){return z.WithTextLabel("Password",eE);},eD(ew)));eF=E.$(E.$((eG=function(eH){return function(eI){return{Name:eH,Password:eI};};},C.Return(eG)),el),ev);eJ=(eK=C.Do(),eK.Delay(function(){var eM,eN,eO,eP,eQ;return eK.Bind((eM=(eN=(eO=F.get_Default(),$.New(F,{Label:{$:1,$0:"Login"},Style:eO.Style,Class:eO.Class})),(eP=(eQ=F.get_Default(),$.New(F,{Label:{$:1,$0:"Reset"},Style:eQ.Style,Class:eQ.Class})),function(eR){return z.WithCustomSubmitAndResetButtons(eN,eP,eR);})),eM(eF)),function(eS){var eT,eU;return eK.ReturnFrom((eT=B.Async("Website:0",[eS]),(eU=function(eV){var eW;if(eV){eW=G;eW.location=ek;ek;return C.Return(null);}else{return k.WarningPanel("Login failed");}},k.WithLoadingPane(eT,eU))));});}));eX=function(eY){return z.WithFormContainer(eY);};return eX(eJ);},MovieTitleForm:function(){var eZ;return E.$((eZ=function(e0){return e0;},C.Return(eZ)),k.Input("Title","Please enter a title"));},RegisterForm:function(){var e1,e2,e3,e4,e5,e7,e9,e$,fa,fb,fc,fd,ff,fh,fj,fk,fo,fp,fF;e1=(e2=(e3=(e4=D.Input(""),(e5=function(e6){return E.Validator().IsNotEmpty("Enter Username",e6);},e5(e4))),(e7=function(e8){return z.WithValidationIcon(e8);},e7(e3))),(e9=function(e_){return z.WithTextLabel("Username",e_);},e9(e2)));e$=(fa=(fb=(fc=D.Password(""),(fd=function(fe){return E.Validator().IsNotEmpty("Enter Password",fe);},fd(fc))),(ff=function(fg){return z.WithValidationIcon(fg);},ff(fb))),(fh=function(fi){return z.WithTextLabel("Password",fi);},fh(fa)));fj=E.$(E.$(E.$((fk=function(fl){return function(fm){return function(fn){return[fl,fm,fn];};};},C.Return(fk)),e1),e$),e$);fo=(fp=C.Do(),fp.Delay(function(){var fr,fs,ft,fu,fv;return fp.Bind((fr=(fs=(ft=F.get_Default(),$.New(F,{Label:{$:1,$0:"Login"},Style:ft.Style,Class:ft.Class})),(fu=(fv=F.get_Default(),$.New(F,{Label:{$:1,$0:"Reset"},Style:fv.Style,Class:fv.Class})),function(fw){return z.WithCustomSubmitAndResetButtons(fs,fu,fw);})),fr(fj)),$.Tupled(function(fx){var fy,fz,fA,fB,fC;return fp.ReturnFrom((fy=(fz=fx[0],(fA=fx[1],(fB=fx[2],B.Async("Website:1",[fz,fA,fB])))),(fC=function(fD){var fE;if(fD.$==2){return k.WarningPanel("User with this name already exists");}else{if(fD.$==1){return k.WarningPanel("Password is not confirmed");}else{fE=G;fE.location="/";return C.Return(null);}}},k.WithLoadingPane(fy,fC))));}));}));fF=function(fG){return z.WithFormContainer(fG);};return fF(fo);},WarningPanel:function(fH){var fI;fI=C.Do();return fI.Delay(function(){var fK;return fI.Bind((fK=function(){return x.add(p.Div(q.ofArray([p.Attr().Class("warningPanel")])),q.ofArray([p.Text(fH)]));},C.OfElement(fK)),function(){return fI.ReturnFrom(C.Never());});});},WithLoadingPane:function(fN,fO){var fP,fQ;fP=(fQ=function(){var fS,fT,fU,fV,f0;fS=p.Div(q.ofArray([p.Attr().Class("loadingPane")]));fT=I.New();fU=(fV=function(){var fX;fX=function(fY){var fZ;fZ=$.New(L,{$:0,$0:fY});fT.event.Trigger(fZ);return M.Return(null);};return M.Bind(fN,fX);},M.Delay(fV));f0=function(f1){var f2;f2={$:0};return M.Start(f1);};f0(fU);return[fS,function(f3){f3;},fT.event];},C.BuildFormlet(fQ));return C.Replace(fP,fO);}},LoginControl:$.Class({get_Body:function(){return k.LoginForm(this.redirectUrl);}}),RegisterControl:$.Class({get_Body:function(){return k.RegisterForm();}})}});$.OnInit(function(){a=$.Safe($$[""]);b=$.Safe(a.Primitives);c=$.Safe(b.Button);d=$.Safe(b.VisiblePrimitive);e=$.Safe(b.ImageView);f=$.Safe(b.LinearLayout);g=$.Safe(b.TextView);h=$.Safe(b.WebView);i=$.Safe($$.Raphael);j=$.Safe($$.Website);k=$.Safe(j.Forms);l=$.Safe(j.Canvas);m=$.Safe(l.SampleInternals);n=$.Safe($$.IntelliFactory.WebSharper);o=$.Safe(n.Html);p=$.Safe(o.Default);q=$.Safe(n.List);r=$.Safe(q.T);s=$.Safe(n.Operators);t=$.Safe($$.jQuery);u=$.Safe($$.document);v=$.Safe($$.Number);w=$.Safe(n.Seq);x=$.Safe(o.Operators);y=$.Safe(n.Formlet);z=$.Safe(y.Enhance);A=$.Safe(z.FormContainerConfiguration);B=$.Safe(n.Remoting);C=$.Safe(y.Formlet);D=$.Safe(y.Controls);E=$.Safe(y.Data);F=$.Safe(z.FormButtonConfiguration);G=$.Safe($$.window);H=$.Safe(n.Control);I=$.Safe(H["FSharpEvent`1"]);J=$.Safe($$.IntelliFactory.Formlet);K=$.Safe(J.Base);L=$.Safe(K["Result`1"]);return M=$.Safe(n.Concurrency);});$.OnLoad(function(){$.Inherit(c,d);$.Inherit(e,d);$.Inherit(f,d);$.Inherit(g,d);$.Inherit(h,d);});}());
