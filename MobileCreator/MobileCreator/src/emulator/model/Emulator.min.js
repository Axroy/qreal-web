define(["require","exports","utils/log/Log","utils/XmlHelper","emulator/viewmodel/EmulatorViewModel","emulator/model/managers/NavigationManager","emulator/model/managers/XmlManager","emulator/model/managers/EventManager"],function(n,t,i,r,u,f,e,o){var s=i,h=r,c=u,l=f,a=e,v=o,y=function(){function n(){var n=this;this.logger=new s.Logger("Emulator"),this.logger.log("constructor"),this.emulatorViewModel=new c.EmulatorViewModel,this.navigationManager=new l.NavigationManager,this.xmlManager=new a.XmlManager,this.eventManager=new v.EventManager,$("#back_button").bind("click",function(){return n.navigationManager.back()})}return n.instance=new n,n.prototype.showXmlStringView=function(n){var t=this;this.logger.log("showXmlStringView: \n"+n),this.clearUi(),n=h.escapeXml(n);var i=this.xmlManager.parseXmlString(n),r=i.pages,u=i.triggers,f=this.eventManager;u.map(function(n){return t.eventManager.addTrigger(n)}),r.map(function(n){return t.addPage(n)}),this.navigationManager.showPage(r[0].Name)},n.prototype.addPage=function(n){this.navigationManager.addPage(n),this.emulatorViewModel.addView(n.Root)},n.prototype.showPage=function(n){this.emulatorViewModel.showView(n)},Object.defineProperty(n.prototype,"NavigationManager",{get:function(){return this.navigationManager},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"EmulatorViewModel",{get:function(){return this.emulatorViewModel},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"EventManager",{get:function(){return this.eventManager},enumerable:!0,configurable:!0}),n.prototype.clearUi=function(){this.navigationManager.clear(),this.emulatorViewModel.clear(),this.eventManager.clear()},n}();t.Emulator=y})