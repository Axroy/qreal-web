define(["require","exports","utils/log/Log","utils/XmlHelper","emulator/model/ui/Button","emulator/model/ui/TextView","emulator/model/ui/LinearLayout","emulator/model/attributes/ButtonTag","emulator/model/attributes/LinearLayoutTag","emulator/model/attributes/TextViewTag","emulator/model/attributes/ImageViewTag","emulator/model/ui/ImageView","emulator/model/ui/WebView","emulator/model/attributes/WebViewTag","emulator/viewmodel/EmulatorViewModel","emulator/model/managers/NavigationManager","emulator/model/managers/XmlManager"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w){var d=i,g=r,nt=u,tt=f,k=e,it=o,b=s,rt=h,ut=c,ft=l,et=a,ot=v,st=y,ht=p,ct=w,lt=function(){function n(){this.logger=new d.Logger("Emulator"),this.logger.log("constructor"),this.emulatorViewModel=new st.EmulatorViewModel,this.navigationManager=new ht.NavigationManager,this.xmlManager=new ct.XmlManager,$("#back_button").bind("click",function(){this.back()})}return n.instance=new n,n.prototype.showXmlStringView=function(n){var i=this,t;n=g.escapeXml(n),t=this.xmlManager.parseXmlString(n),t.map(function(n){return i.addPage(n.name,n.page)}),this.showPage(t[0].name)},n.prototype.addPage=function(n,t){this.navigationManager.addPage(n,t),this.emulatorViewModel.addView(t)},n.prototype.back=function(){var n=this.navigationManager.back();console.log("previousPage: "+n),n&&this.showPage(n)},n.prototype.showPage=function(n){this.logger.log("showPage: "+n),this.emulatorViewModel.showView(this.navigationManager.getPage(n))},Object.defineProperty(n.prototype,"NavigationManager",{get:function(){return this.navigationManager},enumerable:!0,configurable:!0}),n.prototype.createView=function(){this.logger.log("createView");var n=this.showVisitCard(),t=this.showTestStub(),i=this.xmlManager.parsePage("res/main2.xml"),r=this.xmlManager.parsePage("res/info2.xml");this.navigationManager.addPage("page1",n),this.navigationManager.addPage("page2",t),this.navigationManager.addPage("main2",i),this.navigationManager.addPage("info2",r),this.emulatorViewModel.showView(this.navigationManager.getPage("main2"))},n.prototype.showTestStub=function(){var n=new b.LinearLayoutTag,i,t,r;return n.Id="linear",n.Orientation=b.LinearLayoutTag.Vertical,n.Background="#e3e3e3",n.Width=-1,n.Height=-1,i=new k.LinearLayout(n),t=new ot.WebViewTag,t.Id="webView",t.Url="http://www.lanit-tercom.ru/",t.Width=-1,t.Height=-1,r=new et.WebView(t),i.addChild(r),i},n.prototype.showVisitCard=function(){var i=new b.LinearLayoutTag,e,t,r,n,o,u,s,f,h;return i.Id="linear",i.Orientation=b.LinearLayoutTag.Vertical,i.Background="#e3e3e3",i.Width=-1,i.Height=-1,e=new k.LinearLayout(i),t=new b.LinearLayoutTag,t.Id="innerLinear",t.Orientation=b.LinearLayoutTag.Vertical,t.Background="#e3e3e3",t.MarginLeft=20,t.MarginRight=20,r=new k.LinearLayout(t),n=new ut.ImageViewTag,n.Id="logo",n.ImageUrl="https://dl.dropbox.com/u/10802739/lt_logo.jpg",n.Width=300,n.Height=120,n.Gravity="center",n.MarginTop=30,o=new ft.ImageView(n),u=new rt.TextViewTag,u.Id="info",u.Text="LANIT-TERCOM is one of the few Russian IT companies which are able not only to fulfil industrial contracts, but also to carry out challenging science-intensive programming projects.",u.MarginTop=20,s=new tt.TextView(u),f=new it.ButtonTag,f.Id="button",f.Text="Show more",f.MarginTop=320,h=new nt.Button(f),r.addChild(o),r.addChild(s),r.addChild(h),e.addChild(r),e},n}();t.Emulator=lt})