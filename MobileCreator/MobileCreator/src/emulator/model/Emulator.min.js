define(["require","exports","utils/log/Log","emulator/model/ui/Button","emulator/model/ui/TextView","emulator/model/ui/LinearLayout","emulator/model/attributes/ButtonTag","emulator/model/attributes/LinearLayoutTag","emulator/model/attributes/TextViewTag","emulator/model/attributes/ImageViewTag","emulator/model/ui/ImageView","emulator/model/ui/WebView","emulator/model/attributes/WebViewTag","emulator/viewmodel/EmulatorViewModel","emulator/model/managers/NavigationManager","emulator/model/managers/XmlManager"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p){var nt=i,tt=r,it=u,b=f,rt=e,w=o,ut=s,ft=h,et=c,ot=l,st=a,k=v,d=y,g=p,ht=function(){function n(){var n=this;this.logger=new nt.Logger("Emulator"),this.usedPages=[],this.logger.log("constructor"),this.emulatorViewModel=new k.EmulatorViewModel,this.navigationManager=new d.NavigationManager,this.xmlManager=new g.XmlManager,$("#back_button").click(function(){return n.back()})}return n.instance=new n,n.prototype.createView=function(){this.logger.log("createView");var n=this.showVisitCard(),t=this.showTestStub(),i=this.xmlManager.parsePage("res/main2.xml"),r=this.xmlManager.parsePage("res/info2.xml");this.navigationManager.addPage("page1",n),this.navigationManager.addPage("page2",t),this.navigationManager.addPage("main2",i),this.navigationManager.addPage("info2",r),this.emulatorViewModel.showView(this.navigationManager.getPage("main2"))},n.prototype.showXmlStringView=function(n){n=n.replace(/&amp;/g,"&"),n=n.replace(/&/g,"&amp;"),this.logger.log("showView: \n"+n),this.emulatorViewModel=new k.EmulatorViewModel,this.navigationManager=new d.NavigationManager,this.xmlManager=new g.XmlManager,this.usedPages=[];var t=this.xmlManager.parseXmlString(n);this.showPage(t)},n.prototype.back=function(){var n=this.navigationManager.back();console.log("previousPage: "+n),n&&this.showPage(n)},n.prototype.showPage=function(n){this.logger.log("showPage: "+n),this.usedPages[n]?this.emulatorViewModel.showView(this.navigationManager.getPage(n)):(this.usedPages[n]=!0,this.emulatorViewModel.showViewAndCreate(this.navigationManager.getPage(n)))},n.prototype.showTestStub=function(){var n=new w.LinearLayoutTag,i,t,r;return n.Id="linear",n.Orientation=w.LinearLayoutTag.Vertical,n.Background="#e3e3e3",n.Width=-1,n.Height=-1,i=new b.LinearLayout(n),t=new st.WebViewTag,t.Id="webView",t.Url="http://www.lanit-tercom.ru/",t.Width=-1,t.Height=-1,r=new ot.WebView(t),i.addChild(r),i},n.prototype.showVisitCard=function(){var i=new w.LinearLayoutTag,e,t,r,n,o,u,s,f,h;return i.Id="linear",i.Orientation=w.LinearLayoutTag.Vertical,i.Background="#e3e3e3",i.Width=-1,i.Height=-1,e=new b.LinearLayout(i),t=new w.LinearLayoutTag,t.Id="innerLinear",t.Orientation=w.LinearLayoutTag.Vertical,t.Background="#e3e3e3",t.MarginLeft=20,t.MarginRight=20,r=new b.LinearLayout(t),n=new ft.ImageViewTag,n.Id="logo",n.ImageUrl="https://dl.dropbox.com/u/10802739/lt_logo.jpg",n.Width=300,n.Height=120,n.Gravity="center",n.MarginTop=30,o=new et.ImageView(n),u=new ut.TextViewTag,u.Id="info",u.Text="LANIT-TERCOM is one of the few Russian IT companies which are able not only to fulfil industrial contracts, but also to carry out challenging science-intensive programming projects.",u.MarginTop=20,s=new it.TextView(u),f=new rt.ButtonTag,f.Id="button",f.Text="Show more",f.MarginTop=320,h=new tt.Button(f),r.addChild(o),r.addChild(s),r.addChild(h),e.addChild(r),e},Object.defineProperty(n.prototype,"NavigationManager",{get:function(){return this.navigationManager},enumerable:!0,configurable:!0}),n}();t.Emulator=ht})