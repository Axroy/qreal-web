define(["require","exports","utils/log/Log","utils/XmlHelper","emulator/viewmodel/EmulatorViewModel","emulator/model/managers/NavigationManager","emulator/model/managers/XmlManager","emulator/model/logic/Trigger"],function(n,t,i,r,u,f,e,o){var h=i,c=r,l=u,a=f,v=e,s=o,y=function(){function n(){var n=this;this.logger=new h.Logger("Emulator"),this.logger.log("constructor"),this.emulatorViewModel=new l.EmulatorViewModel,this.navigationManager=new a.NavigationManager,this.xmlManager=new v.XmlManager,$("#back_button").bind("click",function(){return n.navigationManager.back()})}return n.instance=new n,n.prototype.showXmlStringView=function(n){var i=this,t;this.logger.log("showXmlStringView: \n"+n),this.clearUi(),n=c.escapeXml(n),t=this.xmlManager.parseXmlString(n),t.map(function(n){return i.addPage(n)}),t.map(function(n){var i=new s.Trigger(s.Trigger.OnShow,function(){console.log("OnShow Trigger")}),t;n.addTrigger(i),t=new s.Trigger(s.Trigger.OnShow,function(){console.log("onTimer Trigger")}),n.addTrigger(t)}),this.navigationManager.showPage(t[0].Name)},n.prototype.addPage=function(n){this.navigationManager.addPage(n),this.emulatorViewModel.addView(n.Root)},n.prototype.showPage=function(n){this.emulatorViewModel.showView(n)},Object.defineProperty(n.prototype,"NavigationManager",{get:function(){return this.navigationManager},enumerable:!0,configurable:!0}),n.prototype.clearUi=function(){this.navigationManager.clear(),this.emulatorViewModel.clear()},n}();t.Emulator=y})