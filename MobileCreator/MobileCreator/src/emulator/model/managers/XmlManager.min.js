define(["require","exports","utils/log/Log","emulator/model/ui/TextView","emulator/model/ui/Button","emulator/model/ui/ImageView","emulator/model/ui/LinearLayout","emulator/model/attributes/LinearLayoutTag","emulator/model/attributes/ControlTag","emulator/model/attributes/TextViewTag","emulator/model/attributes/ButtonTag","emulator/model/attributes/ImageViewTag"],function(n,t,i,r,u,f,e,o,s,h,c,l){var y=i,p=r,w=u,b=f,k=e,v=o,a=s,d=h,g=c,nt=l,tt=function(){function n(){this.logger=new y.Logger("XmlManager"),this.logger.log("in constructor")}return n.LinearLayout="LinearLayout",n.TextView="TextView",n.Button="Button",n.ImageView="ImageView",n.prototype.parsePage=function(){this.logger.log("parse page");var n=new XMLHttpRequest,t;try{n.open("GET","res/main2.xml",!1),n.send(null),t=n.responseXML}catch(i){window.alert("Unable to load the requested file.");return}return this.parse(t.firstChild),this.root},n.prototype.parse=function(n){this.root=this.parseNode(n)},n.prototype.parseNode=function(t){this.logger.log("parse node: "+t.nodeName);var i;switch(t.nodeName){case n.LinearLayout:i=this.parseLinearLayout(t);break;case n.TextView:i=this.parseTextView(t);break;case n.Button:i=this.parseButton(t);break;case n.ImageView:i=this.parseImageView(t)}return i},n.prototype.parseLinearLayout=function(n){var i,r,f,t,u;for(this.logger.log("parseLinearLayout"),i=new v.LinearLayoutTag,this.fillLinearLayoutData(n,i),r=new k.LinearLayout(i),f=n.childNodes.length,t=0;t<f;t++)u=this.parseNode(n.childNodes.item(t)),u&&r.addChild(u);return r},n.prototype.parseTextView=function(n){var t;return this.logger.log("parseTextView"),t=new d.TextViewTag,this.fillTextViewData(n,t),new p.TextView(t)},n.prototype.parseButton=function(n){var t;return this.logger.log("parseButton"),t=new g.ButtonTag,this.fillTextViewData(n,t),new w.Button(t)},n.prototype.parseImageView=function(n){var t;return this.logger.log("parseImageView"),t=new nt.ImageViewTag,this.fillImageViewData(n,t),new b.ImageView(t)},n.prototype.fillLinearLayoutData=function(n,t){this.fillControlPanelData(n,t);var i=n.attributes.orientation;i&&(this.logger.log("orientation: "+i.value),t.Orientation=i.value=="vertical"?v.LinearLayoutTag.Vertical:v.LinearLayoutTag.Horizontal)},n.prototype.fillTextViewData=function(n,t){var i,r;this.fillControlTagData(n,t),i=n.attributes.text,i&&(this.logger.log("text: "+i.value),t.Text=i.value),r=n.attributes.textSize,r&&(this.logger.log("textSize: "+r.value),t.TextSize=parseInt(r.value))},n.prototype.fillButtonData=function(n,t){this.fillTextViewData(n,t)},n.prototype.fillImageViewData=function(n,t){this.fillControlTagData(n,t);var i=n.attributes.src;i&&(this.logger.log("src: "+i.value),t.ImageUrl=i.value)},n.prototype.fillControlPanelData=function(n,t){this.fillControlTagData(n,t)},n.prototype.fillControlTagData=function(n,t){var h=n.attributes.id,i,r,f,e,u,o,c,s;if(h&&(this.logger.log("id: "+h.value),t.Id=h.value),i=n.attributes.layout_width,i){this.logger.log("layout_width: "+i.value);switch(i.value){case"wrap_content":t.Width=a.ControlTag.WrapContent;break;case"fill_parent":t.Width=a.ControlTag.MatchParrent;break;default:t.Width=parseInt(i.value)}}if(r=n.attributes.layout_height,r){this.logger.log("layout_height: "+r.value);switch(r.value){case"wrap_content":t.Height=a.ControlTag.WrapContent;break;case"fill_parent":t.Height=a.ControlTag.MatchParrent;break;default:t.Height=parseInt(r.value)}}f=n.attributes.background,f&&(this.logger.log("background: "+f.value),t.Background=f.value),e=n.attributes.gravity,e&&(this.logger.log("gravity: "+e.value),t.Gravity=e.value),u=n.attributes.layout_marginTop,u&&(this.logger.log("layout_marginTop: "+u.value),t.MarginTop=parseInt(u.value)),o=n.attributes.layout_marginBottom,o&&(this.logger.log("layout_marginBottom: "+o.value),t.MarginBottom=parseInt(o.value)),c=n.attributes.layout_marginLeft,u&&(this.logger.log("layout_marginLeft: "+c.value),t.MarginLeft=parseInt(c.value)),s=n.attributes.layout_marginRight,s&&(this.logger.log("layout_marginRight: "+s.value),t.MarginRight=parseInt(s.value))},n}();t.XmlManager=tt})