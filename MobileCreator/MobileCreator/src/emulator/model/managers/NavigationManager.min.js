define(["require","exports","utils/log/Log","emulator/model/ui/ControlPanel","emulator/model/Emulator"],function(n,t,i,r,u){var e=i,o=r,f=u,s=function(){function n(){this.idPreffix="PageId_",this.pageStack=[],this.pages=[],n.logger.log("in constructor")}return n.logger=new e.Logger("NavigationManager"),Object.defineProperty(n.prototype,"CurrentPage",{get:function(){return this.currentPage},enumerable:!0,configurable:!0}),n.prototype.addPage=function(n){this.pages[this.idPreffix+n.Name]=n},n.prototype.showPage=function(t){n.logger.log("showPage "+t);var i=this.pages[this.idPreffix+t];this.pageStack.push(this.idPreffix+t),f.Emulator.instance.showPage(i.Root),this.currentPage&&this.currentPage.onHide(),i.onShow(),this.currentPage=i},n.prototype.findControlById=function(n){var t=this.currentPage;return this.getControlById(t.Root,n)},n.prototype.getControlById=function(n,t){if(n){if(n.Tag.Id==t)return n;if(n instanceof o.ControlPanel){var i=n.Childrens,r=this;i.forEach(function(n){r.getControlById(n,t)})}}},n.prototype.back=function(){var n=this.pageStack.length,t;n>1&&(this.pageStack.splice(n-1,1),t=this.pageStack[this.pageStack.length-1],f.Emulator.instance.showPage(this.pages[t].Root))},n.prototype.clear=function(){this.pageStack=[],this.pages=[],this.currentPage&&this.currentPage.onHide(),this.currentPage=undefined},n}();t.NavigationManager=s})