<?xml version='1.0' encoding='utf-8'?>
<root>
    <world>
        <walls>
            <wall begin="-49:84" id="" end="137:84"/>
            <wall begin="138:84" id="" end="138:255"/>
        </walls>
        <colorFields/>
        <regions>
            <region filled="true" visible="false" height="25" width="25" y="7" color="#0000ff" id="start_zone" x="18" type="rectangle"/>
            <region filled="true" visible="false" height="80" width="150" y="150" color="#ff0000" id="finish_zone" x="140" type="rectangle"/>
            <region filled="true" visible="false" height="310" width="340" y="-50" color="#00ff00" id="warzone" x="-50" type="rectangle"/>
        </regions>
    </world>
    <robots>
        <robot direction="0" position="6:-5" id="trikV62KitRobot">
            <sensors>
                <sensor direction="0" port="M4###output######" position="75:25" type="kitBase::robotModel::robotParts::Motor"/>
                <sensor direction="0" port="M3###output######" position="75:25" type="kitBase::robotModel::robotParts::Motor"/>
            </sensors>
            <startPosition y="20" direction="0" x="31"/>
            <wheels left="M3###output######" right="M4###output######"/>
        </robot>
    </robots>
    <constraints>
        <timelimit value="20000"/>
        <constraint checkOnce="true" failMessage="Робот должен находиться в начальной точке перед запуском программы!">
            <inside regionId="start_zone" objectId="robot1"/>
        </constraint>
        <constraint failMessage="Робот уехал не туда">
            <inside regionId="warzone" objectId="robot1"/>
        </constraint>
        <!-- Событие, которое говорит о том, что робот вообще поехал и стартует цепочку проверки -->
        <event id="We are alive, first move" settedUpInitially="true">
            <condition>
                <greater>
                    <objectState object="robot1.M3.power"/>
                    <int value="0"/>
                </greater>
            </condition>
            <triggers>
                <setUp id="Finish"/>
            </triggers>
        </event>
        <!-- Событие, которое выдает ошибку, если робот не тронулся с места в первую секунду -->
        <event id="Waiting for going forward too long" settedUpInitially="true">
            <conditions glue="and">
                <timer forceDropOnTimeout="true" timeout="1000"/>
                <settedUp id="We are alive, first move"/>
            </conditions>
            <trigger>
                <fail message="Робот так и не поехал в первую секунду"/>
            </trigger>
        </event>
        <!-- Событие, которое говорит, что задание выполнено, когда робот приезжает на финиш-->
        <event id="Finish">
            <conditions glue="and">
                <timer forceDropOnTimeout="false" timeout="50"/>
                <inside regionId="finish_zone" objectId="robot1"/>
            </conditions>
            <trigger>
                <success/>
            </trigger>
        </event>
    </constraints>
</root>
