<?xml version='1.0' encoding='utf-8'?>
<root>
    <world>
        <walls/>
        <colorFields>
            <line fill="#000000" stroke="#000000" id="line0" stroke-style="solid" stroke-width="20" fill-style="none" end="-624:351" begin="-679:314"/>
            <line fill="#000000" stroke="#000000" id="line1" stroke-style="solid" stroke-width="20" fill-style="none" end="-545:380" begin="-610:358"/>
        </colorFields>
        <regions>
            <region x="0" color="#87cefa" y="0" type="bound" filled="true" height="117" boundItem="line0" visible="false" stroke="15" id="line0_region" width="135"/>
            <region x="0" color="#87cefa" y="0" type="bound" filled="true" height="102" boundItem="line1" visible="false" stroke="15" id="line1_region" width="145"/>
            <region x="-739" color="#87cefa" y="273" type="rectangle" filled="true" height="25" visible="false" id="start_zone" width="25"/>
            <region x="-470" color="#ff0000" y="-107" type="rectangle" filled="true" height="50" visible="false" id="finish_zone" width="50"/>
        </regions>
    </world>
    <robots>
        <robot direction="30" id="trikKitRobot" position="-751:261">
            <sensors>
                <sensor direction="0" type="kitBase::robotModel::robotParts::LightSensor" port="A2###input###JA2###sensorA2" position="77:36"/>
                <sensor direction="0" type="kitBase::robotModel::robotParts::LightSensor" port="A1###input###JA1###sensorA1" position="77:14"/>
                <sensor direction="0" type="kitBase::robotModel::robotParts::Motor" port="M3###output######" position="75:25"/>
                <sensor direction="0" type="kitBase::robotModel::robotParts::Motor" port="M4###output######" position="75:25"/>
            </sensors>
            <startPosition x="-726" direction="30" y="286"/>
            <wheels left="M3###output######" right="M4###output######"/>
        </robot>
    </robots>
    <constraints>
        <timelimit value="30000"/>
        <constraint failMessage="Робот должен находиться в начальной точке перед запуском!" checkOnce="true">
            <inside regionId="start_zone" objectId="robot1"/>
        </constraint>
        <constraint failMessage="Робот должен ехать по линии!">
            <conditions glue="or">
                <inside regionId="line0_region" objectId="robot1.A1"/>
                <inside regionId="line1_region" objectId="robot1.A1"/>
            </conditions>
        </constraint>
        <!-- Событие, которое говорит о том, что робот вообще поехал и стартует цепочку проверки -->
        <event id="We are alive, first move" settedUpInitially="true">
            <condition>
                <greater>
                    <objectState object="robot1.M3.power"/>
                    <int value="0"/>
                </greater>
            </condition>
            <triggers>
                <setUp id="Finish"/>
            </triggers>
        </event>
        <!-- Событие, которое выдает ошибку, если робот не тронулся с места в первую секунду -->
        <event id="Waiting for going forward too long" settedUpInitially="true">
            <conditions glue="and">
                <timer forceDropOnTimeout="true" timeout="1000"/>
                <settedUp id="We are alive, first move"/>
            </conditions>
            <trigger>
                <fail message="Робот так и не поехал в первую секунду"/>
            </trigger>
        </event>
        <!-- Событие, которое говорит, что задание выполнено, когда робот приезжает на линию финиша-->
        <event id="Finish">
            <conditions glue="and">
                <timer forceDropOnTimeout="false" timeout="50"/>
            </conditions>
            <trigger>
                <success/>
            </trigger>
        </event>
    </constraints>
</root>
